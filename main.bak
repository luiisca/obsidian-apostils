/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => SidenoteCollisionAvoider
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var SidenoteCollisionAvoider = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.rafId = null;
    this.cleanups = [];
    this.cmRoot = null;
    this.isMutating = false;
  }
  async onload() {
    this.registerEvent(
      this.app.workspace.on(
        "active-leaf-change",
        () => this.rebindAndSchedule()
      )
    );
    this.registerEvent(
      this.app.workspace.on(
        "layout-change",
        () => this.rebindAndSchedule()
      )
    );
    this.registerEvent(
      this.app.workspace.on(
        "file-open",
        (_file) => this.rebindAndSchedule()
      )
    );
    this.registerDomEvent(window, "resize", () => this.scheduleLayout());
    this.rebindAndSchedule();
  }
  onunload() {
    this.cancelScheduled();
    this.cleanups.forEach((fn) => fn());
    this.cleanups = [];
    this.deactivateCssGate();
    const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    view == null ? void 0 : view.containerEl.querySelectorAll(".sidenote-overlay").forEach((n) => n.remove());
    view == null ? void 0 : view.containerEl.querySelectorAll("sup.sidenote-ref").forEach((n) => n.remove());
  }
  cancelScheduled() {
    if (this.rafId !== null) {
      cancelAnimationFrame(this.rafId);
      this.rafId = null;
    }
  }
  scheduleLayout() {
    this.cancelScheduled();
    this.rafId = requestAnimationFrame(() => {
      this.rafId = null;
      this.layout();
    });
  }
  rebindAndSchedule() {
    this.rebind();
    this.scheduleLayout();
  }
  rebind() {
    this.cleanups.forEach((fn) => fn());
    this.cleanups = [];
    const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!view) return;
    const root = view.containerEl;
    const cmRoot = root.querySelector(
      ".markdown-source-view.mod-cm6"
    );
    if (!cmRoot) return;
    this.cmRoot = cmRoot;
    const scroller = cmRoot.querySelector(".cm-scroller");
    if (!scroller) return;
    const onScroll = () => this.scheduleLayout();
    scroller.addEventListener("scroll", onScroll, { passive: true });
    this.cleanups.push(
      () => scroller.removeEventListener("scroll", onScroll)
    );
    const content = cmRoot.querySelector(".cm-content");
    if (content) {
      const mo = new MutationObserver(() => {
        if (this.isMutating) return;
        this.scheduleLayout();
      });
      mo.observe(content, {
        childList: true,
        subtree: true,
        characterData: true
      });
      this.cleanups.push(() => mo.disconnect());
    }
  }
  activateCssGate(cmRoot) {
    cmRoot.classList.add("sidenotes-active");
    console.log("\u2713 Sidenotes activated");
  }
  deactivateCssGate() {
    var _a;
    (_a = this.cmRoot) == null ? void 0 : _a.classList.remove("sidenotes-active");
    console.log("\u2717 Sidenotes deactivated");
  }
  getScrollerAndOverlay(cmRoot) {
    const scroller = cmRoot.querySelector(".cm-scroller");
    if (!scroller) return null;
    let overlay = scroller.querySelector(".sidenote-overlay");
    if (!overlay) {
      overlay = document.createElement("div");
      overlay.className = "sidenote-overlay";
      overlay.setAttribute("contenteditable", "false");
      overlay.setAttribute("aria-hidden", "true");
      scroller.appendChild(overlay);
    }
    return { scroller, overlay };
  }
  layout() {
    var _a, _b;
    const cmRoot = this.cmRoot;
    if (!cmRoot) return;
    const so = this.getScrollerAndOverlay(cmRoot);
    if (!so) return;
    const { scroller, overlay } = so;
    overlay.style.position = "absolute";
    overlay.style.top = "0";
    overlay.style.left = "0";
    overlay.style.width = "100%";
    overlay.style.height = `${scroller.scrollHeight}px`;
    overlay.style.pointerEvents = "none";
    overlay.style.zIndex = "1000";
    scroller.style.position = "relative";
    this.isMutating = true;
    try {
      overlay.replaceChildren();
      cmRoot.querySelectorAll("sup.sidenote-ref").forEach((n2) => n2.remove());
    } finally {
      this.isMutating = false;
    }
    const spans = Array.from(
      cmRoot.querySelectorAll("span.sidenote")
    );
    console.log(`Found ${spans.length} sidenote spans`);
    if (spans.length === 0) {
      this.deactivateCssGate();
      return;
    }
    const mediaQuery = window.matchMedia("(min-width: 1300px)");
    console.log(
      `Media query (min-width: 1300px): ${mediaQuery.matches}, window width: ${window.innerWidth}px`
    );
    if (!mediaQuery.matches) {
      this.deactivateCssGate();
      return;
    }
    const ordered = spans.map((el) => ({ el, rect: el.getBoundingClientRect() })).sort((a, b) => a.rect.top - b.rect.top);
    const scrollerRect = scroller.getBoundingClientRect();
    const sizer = (_a = cmRoot.querySelector(".cm-sizer")) != null ? _a : cmRoot.querySelector(".cm-contentContainer");
    if (!sizer) {
      console.log("\u2717 No sizer found");
      this.deactivateCssGate();
      return;
    }
    const sizerRect = sizer.getBoundingClientRect();
    const bodyLeftRelativeToScroller = sizerRect.left - scrollerRect.left;
    const bodyLeftAbsolute = sizerRect.left;
    const scrollerLeftAbsolute = scrollerRect.left;
    console.log(`Scroller left (absolute): ${scrollerLeftAbsolute}px`);
    console.log(`Body left (absolute): ${bodyLeftAbsolute}px`);
    console.log(
      `Body left (relative to scroller): ${bodyLeftRelativeToScroller}px`
    );
    const gapPx = this.readCssVarPx(cmRoot, "--sidenote-gap", 2.25 * 16);
    const preferredWidthPx = this.readCssVarPx(
      cmRoot,
      "--sidenote-width",
      18 * 16
    );
    const minWidthPx = this.readCssVarPx(
      cmRoot,
      "--sidenote-min-width",
      12 * 16
    );
    const maxWidthPx = this.readCssVarPx(
      cmRoot,
      "--sidenote-max-width",
      24 * 16
    );
    console.log(
      `CSS vars - Gap: ${gapPx}px, Preferred: ${preferredWidthPx}px, Min: ${minWidthPx}px, Max: ${maxWidthPx}px`
    );
    const spaceLeftOfBody = bodyLeftAbsolute - scrollerLeftAbsolute;
    console.log(`Space left of body: ${spaceLeftOfBody}px`);
    const minLeftMargin = 8;
    const availableSpace = spaceLeftOfBody - gapPx - minLeftMargin;
    console.log(
      `Available space for sidenotes: ${availableSpace}px (need minimum ${minWidthPx}px)`
    );
    if (availableSpace < minWidthPx) {
      console.log(
        `\u2717 Not enough space: need ${minWidthPx}px, have ${availableSpace}px`
      );
      this.deactivateCssGate();
      return;
    }
    let sidenoteWidth = preferredWidthPx;
    if (sidenoteWidth > availableSpace) {
      sidenoteWidth = availableSpace;
    }
    if (availableSpace > preferredWidthPx && availableSpace <= maxWidthPx) {
      sidenoteWidth = availableSpace;
    } else if (availableSpace > maxWidthPx) {
      sidenoteWidth = maxWidthPx;
    }
    sidenoteWidth = Math.max(minWidthPx, sidenoteWidth);
    const sidenoteLeft = bodyLeftRelativeToScroller - gapPx - sidenoteWidth;
    console.log(
      `Calculated sidenote width: ${sidenoteWidth}px, left position: ${sidenoteLeft}px`
    );
    let n = 1;
    const marginNodes = [];
    this.isMutating = true;
    try {
      for (const { el: sn, rect } of ordered) {
        const num = String(n++);
        const sup = document.createElement("sup");
        sup.className = "sidenote-ref";
        sup.textContent = num;
        sn.insertAdjacentElement("afterend", sup);
        const margin = document.createElement("small");
        margin.className = "sidenote-margin";
        margin.dataset.sidenoteNum = num;
        margin.setAttribute("contenteditable", "false");
        const y = rect.top - scrollerRect.top + scroller.scrollTop + 2;
        margin.style.left = `${sidenoteLeft}px`;
        margin.style.top = `${y}px`;
        margin.style.position = "absolute";
        margin.style.width = `${sidenoteWidth}px`;
        margin.style.pointerEvents = "auto";
        margin.style.zIndex = "1001";
        const raw = this.normalizeText((_b = sn.textContent) != null ? _b : "");
        margin.appendChild(this.renderMarkdownLinksToFragment(raw));
        overlay.appendChild(margin);
        marginNodes.push(margin);
        sn.dataset.sidenoteNum = num;
      }
      console.log(`\u2713 Created ${marginNodes.length} margin notes`);
    } finally {
      this.isMutating = false;
    }
    this.activateCssGate(cmRoot);
    this.avoidCollisions(marginNodes, 8);
  }
  readCssVarPx(cmRoot, name, fallbackPx) {
    const read = (n) => {
      const v1 = getComputedStyle(cmRoot).getPropertyValue(n).trim();
      if (v1) return v1;
      return getComputedStyle(document.documentElement).getPropertyValue(n).trim();
    };
    const toPx = (raw2, fallback) => {
      const px = /^(\d+(?:\.\d+)?)px$/.exec(raw2);
      if (px) return Number(px[1]);
      const rem = /^(\d+(?:\.\d+)?)rem$/.exec(raw2);
      if (rem) {
        const rootFont = parseFloat(
          getComputedStyle(document.documentElement).fontSize
        ) || 16;
        return Number(rem[1]) * rootFont;
      }
      return fallback;
    };
    const raw = read(name);
    if (!raw) return fallbackPx;
    return toPx(raw, fallbackPx);
  }
  normalizeText(s) {
    return (s != null ? s : "").replace(/\s+/g, " ").trim();
  }
  renderMarkdownLinksToFragment(text) {
    const frag = document.createDocumentFragment();
    const re = /\[([^\]]+)\]\(([^)\s]+)\)/g;
    let last = 0;
    let m;
    while ((m = re.exec(text)) !== null) {
      const [full, label, urlRaw] = m;
      const start = m.index;
      if (start > last)
        frag.appendChild(
          document.createTextNode(text.slice(last, start))
        );
      const url = urlRaw.trim();
      const isSafe = url.startsWith("http://") || url.startsWith("https://") || url.startsWith("mailto:");
      if (isSafe) {
        const a = document.createElement("a");
        a.textContent = label;
        a.href = url;
        a.rel = "noopener noreferrer";
        a.target = "_blank";
        frag.appendChild(a);
      } else {
        frag.appendChild(document.createTextNode(full));
      }
      last = start + full.length;
    }
    if (last < text.length)
      frag.appendChild(document.createTextNode(text.slice(last)));
    return frag;
  }
  avoidCollisions(nodes, spacing) {
    for (const sn of nodes) sn.style.setProperty("--sidenote-shift", "0px");
    const measured = nodes.map((el) => ({ el, rect: el.getBoundingClientRect() })).sort((a, b) => a.rect.top - b.rect.top);
    let bottom = -Infinity;
    for (const { el, rect } of measured) {
      const desiredTop = rect.top;
      const minTop = bottom === -Infinity ? desiredTop : bottom + spacing;
      const actualTop = Math.max(desiredTop, minTop);
      const shift = actualTop - desiredTop;
      if (shift > 0.5)
        el.style.setProperty("--sidenote-shift", `${shift}px`);
      bottom = actualTop + rect.height;
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IE1hcmtkb3duVmlldywgUGx1Z2luLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG50eXBlIENsZWFudXBGbiA9ICgpID0+IHZvaWQ7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNpZGVub3RlQ29sbGlzaW9uQXZvaWRlciBleHRlbmRzIFBsdWdpbiB7XG5cdHByaXZhdGUgcmFmSWQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGNsZWFudXBzOiBDbGVhbnVwRm5bXSA9IFtdO1xuXG5cdHByaXZhdGUgY21Sb290OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGlzTXV0YXRpbmcgPSBmYWxzZTtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiYWN0aXZlLWxlYWYtY2hhbmdlXCIsICgpID0+XG5cdFx0XHRcdHRoaXMucmViaW5kQW5kU2NoZWR1bGUoKSxcblx0XHRcdCksXG5cdFx0KTtcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJsYXlvdXQtY2hhbmdlXCIsICgpID0+XG5cdFx0XHRcdHRoaXMucmViaW5kQW5kU2NoZWR1bGUoKSxcblx0XHRcdCksXG5cdFx0KTtcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgKF9maWxlOiBURmlsZSB8IG51bGwpID0+XG5cdFx0XHRcdHRoaXMucmViaW5kQW5kU2NoZWR1bGUoKSxcblx0XHRcdCksXG5cdFx0KTtcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQod2luZG93LCBcInJlc2l6ZVwiLCAoKSA9PiB0aGlzLnNjaGVkdWxlTGF5b3V0KCkpO1xuXG5cdFx0dGhpcy5yZWJpbmRBbmRTY2hlZHVsZSgpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0dGhpcy5jYW5jZWxTY2hlZHVsZWQoKTtcblx0XHR0aGlzLmNsZWFudXBzLmZvckVhY2goKGZuKSA9PiBmbigpKTtcblx0XHR0aGlzLmNsZWFudXBzID0gW107XG5cdFx0dGhpcy5kZWFjdGl2YXRlQ3NzR2F0ZSgpO1xuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdHZpZXc/LmNvbnRhaW5lckVsXG5cdFx0XHQucXVlcnlTZWxlY3RvckFsbChcIi5zaWRlbm90ZS1vdmVybGF5XCIpXG5cdFx0XHQuZm9yRWFjaCgobikgPT4gbi5yZW1vdmUoKSk7XG5cdFx0dmlldz8uY29udGFpbmVyRWxcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKFwic3VwLnNpZGVub3RlLXJlZlwiKVxuXHRcdFx0LmZvckVhY2goKG4pID0+IG4ucmVtb3ZlKCkpO1xuXHR9XG5cblx0cHJpdmF0ZSBjYW5jZWxTY2hlZHVsZWQoKSB7XG5cdFx0aWYgKHRoaXMucmFmSWQgIT09IG51bGwpIHtcblx0XHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmFmSWQpO1xuXHRcdFx0dGhpcy5yYWZJZCA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzY2hlZHVsZUxheW91dCgpIHtcblx0XHR0aGlzLmNhbmNlbFNjaGVkdWxlZCgpO1xuXHRcdHRoaXMucmFmSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0dGhpcy5yYWZJZCA9IG51bGw7XG5cdFx0XHR0aGlzLmxheW91dCgpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSByZWJpbmRBbmRTY2hlZHVsZSgpIHtcblx0XHR0aGlzLnJlYmluZCgpO1xuXHRcdHRoaXMuc2NoZWR1bGVMYXlvdXQoKTtcblx0fVxuXG5cdHByaXZhdGUgcmViaW5kKCkge1xuXHRcdHRoaXMuY2xlYW51cHMuZm9yRWFjaCgoZm4pID0+IGZuKCkpO1xuXHRcdHRoaXMuY2xlYW51cHMgPSBbXTtcblxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdGlmICghdmlldykgcmV0dXJuO1xuXG5cdFx0Y29uc3Qgcm9vdCA9IHZpZXcuY29udGFpbmVyRWw7XG5cdFx0Y29uc3QgY21Sb290ID0gcm9vdC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50Pihcblx0XHRcdFwiLm1hcmtkb3duLXNvdXJjZS12aWV3Lm1vZC1jbTZcIixcblx0XHQpO1xuXHRcdGlmICghY21Sb290KSByZXR1cm47XG5cblx0XHR0aGlzLmNtUm9vdCA9IGNtUm9vdDtcblxuXHRcdGNvbnN0IHNjcm9sbGVyID0gY21Sb290LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiLmNtLXNjcm9sbGVyXCIpO1xuXHRcdGlmICghc2Nyb2xsZXIpIHJldHVybjtcblxuXHRcdGNvbnN0IG9uU2Nyb2xsID0gKCkgPT4gdGhpcy5zY2hlZHVsZUxheW91dCgpO1xuXHRcdHNjcm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgb25TY3JvbGwsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblx0XHR0aGlzLmNsZWFudXBzLnB1c2goKCkgPT5cblx0XHRcdHNjcm9sbGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgb25TY3JvbGwpLFxuXHRcdCk7XG5cblx0XHRjb25zdCBjb250ZW50ID0gY21Sb290LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiLmNtLWNvbnRlbnRcIik7XG5cdFx0aWYgKGNvbnRlbnQpIHtcblx0XHRcdGNvbnN0IG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5pc011dGF0aW5nKSByZXR1cm47XG5cdFx0XHRcdHRoaXMuc2NoZWR1bGVMYXlvdXQoKTtcblx0XHRcdH0pO1xuXHRcdFx0bW8ub2JzZXJ2ZShjb250ZW50LCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogdHJ1ZSxcblx0XHRcdFx0Y2hhcmFjdGVyRGF0YTogdHJ1ZSxcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5jbGVhbnVwcy5wdXNoKCgpID0+IG1vLmRpc2Nvbm5lY3QoKSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhY3RpdmF0ZUNzc0dhdGUoY21Sb290OiBIVE1MRWxlbWVudCkge1xuXHRcdGNtUm9vdC5jbGFzc0xpc3QuYWRkKFwic2lkZW5vdGVzLWFjdGl2ZVwiKTtcblx0XHRjb25zb2xlLmxvZyhcIlx1MjcxMyBTaWRlbm90ZXMgYWN0aXZhdGVkXCIpO1xuXHR9XG5cblx0cHJpdmF0ZSBkZWFjdGl2YXRlQ3NzR2F0ZSgpIHtcblx0XHR0aGlzLmNtUm9vdD8uY2xhc3NMaXN0LnJlbW92ZShcInNpZGVub3Rlcy1hY3RpdmVcIik7XG5cdFx0Y29uc29sZS5sb2coXCJcdTI3MTcgU2lkZW5vdGVzIGRlYWN0aXZhdGVkXCIpO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRTY3JvbGxlckFuZE92ZXJsYXkoXG5cdFx0Y21Sb290OiBIVE1MRWxlbWVudCxcblx0KTogeyBzY3JvbGxlcjogSFRNTEVsZW1lbnQ7IG92ZXJsYXk6IEhUTUxFbGVtZW50IH0gfCBudWxsIHtcblx0XHRjb25zdCBzY3JvbGxlciA9IGNtUm9vdC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihcIi5jbS1zY3JvbGxlclwiKTtcblx0XHRpZiAoIXNjcm9sbGVyKSByZXR1cm4gbnVsbDtcblxuXHRcdGxldCBvdmVybGF5ID0gc2Nyb2xsZXIucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oXCIuc2lkZW5vdGUtb3ZlcmxheVwiKTtcblx0XHRpZiAoIW92ZXJsYXkpIHtcblx0XHRcdG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdFx0b3ZlcmxheS5jbGFzc05hbWUgPSBcInNpZGVub3RlLW92ZXJsYXlcIjtcblx0XHRcdG92ZXJsYXkuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwiZmFsc2VcIik7XG5cdFx0XHRvdmVybGF5LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcblx0XHRcdHNjcm9sbGVyLmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHNjcm9sbGVyLCBvdmVybGF5IH07XG5cdH1cblxuXHRwcml2YXRlIGxheW91dCgpIHtcblx0XHRjb25zdCBjbVJvb3QgPSB0aGlzLmNtUm9vdDtcblx0XHRpZiAoIWNtUm9vdCkgcmV0dXJuO1xuXG5cdFx0Y29uc3Qgc28gPSB0aGlzLmdldFNjcm9sbGVyQW5kT3ZlcmxheShjbVJvb3QpO1xuXHRcdGlmICghc28pIHJldHVybjtcblxuXHRcdGNvbnN0IHsgc2Nyb2xsZXIsIG92ZXJsYXkgfSA9IHNvO1xuXG5cdFx0Ly8gS2VlcCBvdmVybGF5IHNpemVkIHRvIGZ1bGwgc2Nyb2xsIGhlaWdodFxuXHRcdG92ZXJsYXkuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0b3ZlcmxheS5zdHlsZS50b3AgPSBcIjBcIjtcblx0XHRvdmVybGF5LnN0eWxlLmxlZnQgPSBcIjBcIjtcblx0XHRvdmVybGF5LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG5cdFx0b3ZlcmxheS5zdHlsZS5oZWlnaHQgPSBgJHtzY3JvbGxlci5zY3JvbGxIZWlnaHR9cHhgO1xuXHRcdG92ZXJsYXkuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuXHRcdG92ZXJsYXkuc3R5bGUuekluZGV4ID0gXCIxMDAwXCI7XG5cblx0XHRzY3JvbGxlci5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblxuXHRcdC8vIENsZWFyIG92ZXJsYXkgKyBtYXJrZXJzXG5cdFx0dGhpcy5pc011dGF0aW5nID0gdHJ1ZTtcblx0XHR0cnkge1xuXHRcdFx0b3ZlcmxheS5yZXBsYWNlQ2hpbGRyZW4oKTtcblx0XHRcdGNtUm9vdFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvckFsbChcInN1cC5zaWRlbm90ZS1yZWZcIilcblx0XHRcdFx0LmZvckVhY2goKG4pID0+IG4ucmVtb3ZlKCkpO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHR0aGlzLmlzTXV0YXRpbmcgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRjb25zdCBzcGFucyA9IEFycmF5LmZyb20oXG5cdFx0XHRjbVJvb3QucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXCJzcGFuLnNpZGVub3RlXCIpLFxuXHRcdCk7XG5cblx0XHRjb25zb2xlLmxvZyhgRm91bmQgJHtzcGFucy5sZW5ndGh9IHNpZGVub3RlIHNwYW5zYCk7XG5cblx0XHRpZiAoc3BhbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aGlzLmRlYWN0aXZhdGVDc3NHYXRlKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVzcGVjdCBicmVha3BvaW50XG5cdFx0Y29uc3QgbWVkaWFRdWVyeSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogMTMwMHB4KVwiKTtcblx0XHRjb25zb2xlLmxvZyhcblx0XHRcdGBNZWRpYSBxdWVyeSAobWluLXdpZHRoOiAxMzAwcHgpOiAke21lZGlhUXVlcnkubWF0Y2hlc30sIHdpbmRvdyB3aWR0aDogJHt3aW5kb3cuaW5uZXJXaWR0aH1weGAsXG5cdFx0KTtcblxuXHRcdGlmICghbWVkaWFRdWVyeS5tYXRjaGVzKSB7XG5cdFx0XHR0aGlzLmRlYWN0aXZhdGVDc3NHYXRlKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgb3JkZXJlZCA9IHNwYW5zXG5cdFx0XHQubWFwKChlbCkgPT4gKHsgZWwsIHJlY3Q6IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIH0pKVxuXHRcdFx0LnNvcnQoKGEsIGIpID0+IGEucmVjdC50b3AgLSBiLnJlY3QudG9wKTtcblxuXHRcdGNvbnN0IHNjcm9sbGVyUmVjdCA9IHNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0Ly8gRmluZCBib2R5IHRleHQgbGVmdCBlZGdlXG5cdFx0Y29uc3Qgc2l6ZXIgPVxuXHRcdFx0Y21Sb290LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiLmNtLXNpemVyXCIpID8/XG5cdFx0XHRjbVJvb3QucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oXCIuY20tY29udGVudENvbnRhaW5lclwiKTtcblxuXHRcdGlmICghc2l6ZXIpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiXHUyNzE3IE5vIHNpemVyIGZvdW5kXCIpO1xuXHRcdFx0dGhpcy5kZWFjdGl2YXRlQ3NzR2F0ZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNpemVyUmVjdCA9IHNpemVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0Ly8gQm9keSBsZWZ0IGVkZ2UgcmVsYXRpdmUgdG8gc2Nyb2xsZXJcblx0XHRjb25zdCBib2R5TGVmdFJlbGF0aXZlVG9TY3JvbGxlciA9IHNpemVyUmVjdC5sZWZ0IC0gc2Nyb2xsZXJSZWN0LmxlZnQ7XG5cblx0XHQvLyBCb2R5IGxlZnQgZWRnZSByZWxhdGl2ZSB0byB2aWV3cG9ydCAod2hlcmUgaXQgYWN0dWFsbHkgaXMgb24gc2NyZWVuKVxuXHRcdGNvbnN0IGJvZHlMZWZ0QWJzb2x1dGUgPSBzaXplclJlY3QubGVmdDtcblxuXHRcdC8vIFNjcm9sbGVyIGxlZnQgZWRnZSByZWxhdGl2ZSB0byB2aWV3cG9ydFxuXHRcdGNvbnN0IHNjcm9sbGVyTGVmdEFic29sdXRlID0gc2Nyb2xsZXJSZWN0LmxlZnQ7XG5cblx0XHRjb25zb2xlLmxvZyhgU2Nyb2xsZXIgbGVmdCAoYWJzb2x1dGUpOiAke3Njcm9sbGVyTGVmdEFic29sdXRlfXB4YCk7XG5cdFx0Y29uc29sZS5sb2coYEJvZHkgbGVmdCAoYWJzb2x1dGUpOiAke2JvZHlMZWZ0QWJzb2x1dGV9cHhgKTtcblx0XHRjb25zb2xlLmxvZyhcblx0XHRcdGBCb2R5IGxlZnQgKHJlbGF0aXZlIHRvIHNjcm9sbGVyKTogJHtib2R5TGVmdFJlbGF0aXZlVG9TY3JvbGxlcn1weGAsXG5cdFx0KTtcblxuXHRcdC8vIFJlYWQgQ1NTIHZhcmlhYmxlc1xuXHRcdGNvbnN0IGdhcFB4ID0gdGhpcy5yZWFkQ3NzVmFyUHgoY21Sb290LCBcIi0tc2lkZW5vdGUtZ2FwXCIsIDIuMjUgKiAxNik7XG5cdFx0Y29uc3QgcHJlZmVycmVkV2lkdGhQeCA9IHRoaXMucmVhZENzc1ZhclB4KFxuXHRcdFx0Y21Sb290LFxuXHRcdFx0XCItLXNpZGVub3RlLXdpZHRoXCIsXG5cdFx0XHQxOCAqIDE2LFxuXHRcdCk7XG5cdFx0Y29uc3QgbWluV2lkdGhQeCA9IHRoaXMucmVhZENzc1ZhclB4KFxuXHRcdFx0Y21Sb290LFxuXHRcdFx0XCItLXNpZGVub3RlLW1pbi13aWR0aFwiLFxuXHRcdFx0MTIgKiAxNixcblx0XHQpO1xuXHRcdGNvbnN0IG1heFdpZHRoUHggPSB0aGlzLnJlYWRDc3NWYXJQeChcblx0XHRcdGNtUm9vdCxcblx0XHRcdFwiLS1zaWRlbm90ZS1tYXgtd2lkdGhcIixcblx0XHRcdDI0ICogMTYsXG5cdFx0KTtcblxuXHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0YENTUyB2YXJzIC0gR2FwOiAke2dhcFB4fXB4LCBQcmVmZXJyZWQ6ICR7cHJlZmVycmVkV2lkdGhQeH1weCwgTWluOiAke21pbldpZHRoUHh9cHgsIE1heDogJHttYXhXaWR0aFB4fXB4YCxcblx0XHQpO1xuXG5cdFx0Ly8gQ2FsY3VsYXRlIHNwYWNlIGF2YWlsYWJsZSB0byB0aGUgTEVGVCBvZiB0aGUgYm9keSB0ZXh0XG5cdFx0Ly8gVGhpcyBpcyBmcm9tIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIHNjcm9sbGVyIHRvIHdoZXJlIHRoZSBib2R5IHN0YXJ0c1xuXHRcdGNvbnN0IHNwYWNlTGVmdE9mQm9keSA9IGJvZHlMZWZ0QWJzb2x1dGUgLSBzY3JvbGxlckxlZnRBYnNvbHV0ZTtcblxuXHRcdGNvbnNvbGUubG9nKGBTcGFjZSBsZWZ0IG9mIGJvZHk6ICR7c3BhY2VMZWZ0T2ZCb2R5fXB4YCk7XG5cblx0XHQvLyBBdmFpbGFibGUgc3BhY2UgZm9yIHNpZGVub3RlcyAoZXhjbHVkaW5nIHRoZSBnYXApXG5cdFx0Y29uc3QgbWluTGVmdE1hcmdpbiA9IDg7XG5cdFx0Y29uc3QgYXZhaWxhYmxlU3BhY2UgPSBzcGFjZUxlZnRPZkJvZHkgLSBnYXBQeCAtIG1pbkxlZnRNYXJnaW47XG5cblx0XHRjb25zb2xlLmxvZyhcblx0XHRcdGBBdmFpbGFibGUgc3BhY2UgZm9yIHNpZGVub3RlczogJHthdmFpbGFibGVTcGFjZX1weCAobmVlZCBtaW5pbXVtICR7bWluV2lkdGhQeH1weClgLFxuXHRcdCk7XG5cblx0XHQvLyBJZiBub3QgZW5vdWdoIHNwYWNlIGZvciBtaW5pbXVtIHdpZHRoLCBkb24ndCBzaG93IHNpZGVub3Rlc1xuXHRcdGlmIChhdmFpbGFibGVTcGFjZSA8IG1pbldpZHRoUHgpIHtcblx0XHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0XHRgXHUyNzE3IE5vdCBlbm91Z2ggc3BhY2U6IG5lZWQgJHttaW5XaWR0aFB4fXB4LCBoYXZlICR7YXZhaWxhYmxlU3BhY2V9cHhgLFxuXHRcdFx0KTtcblx0XHRcdHRoaXMuZGVhY3RpdmF0ZUNzc0dhdGUoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgYWN0dWFsIHdpZHRoOiBzdGFydCB3aXRoIHByZWZlcnJlZCwgYnV0IGNvbnN0cmFpbiBieSBhdmFpbGFibGUgc3BhY2Vcblx0XHRsZXQgc2lkZW5vdGVXaWR0aCA9IHByZWZlcnJlZFdpZHRoUHg7XG5cblx0XHQvLyBDb25zdHJhaW4gdG8gYXZhaWxhYmxlIHNwYWNlXG5cdFx0aWYgKHNpZGVub3RlV2lkdGggPiBhdmFpbGFibGVTcGFjZSkge1xuXHRcdFx0c2lkZW5vdGVXaWR0aCA9IGF2YWlsYWJsZVNwYWNlO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGdyb3dpbmcgdG8gbWF4IGlmIHNwYWNlIHBlcm1pdHNcblx0XHRpZiAoYXZhaWxhYmxlU3BhY2UgPiBwcmVmZXJyZWRXaWR0aFB4ICYmIGF2YWlsYWJsZVNwYWNlIDw9IG1heFdpZHRoUHgpIHtcblx0XHRcdHNpZGVub3RlV2lkdGggPSBhdmFpbGFibGVTcGFjZTtcblx0XHR9IGVsc2UgaWYgKGF2YWlsYWJsZVNwYWNlID4gbWF4V2lkdGhQeCkge1xuXHRcdFx0c2lkZW5vdGVXaWR0aCA9IG1heFdpZHRoUHg7XG5cdFx0fVxuXG5cdFx0Ly8gRW5mb3JjZSBtaW5pbXVtXG5cdFx0c2lkZW5vdGVXaWR0aCA9IE1hdGgubWF4KG1pbldpZHRoUHgsIHNpZGVub3RlV2lkdGgpO1xuXG5cdFx0Ly8gUG9zaXRpb24gc2lkZW5vdGVzOiByaWdodC1hbGlnbiB0aGVtIHRvIG1haW50YWluIGZpeGVkIGdhcCBmcm9tIGJvZHlcblx0XHRjb25zdCBzaWRlbm90ZUxlZnQgPSBib2R5TGVmdFJlbGF0aXZlVG9TY3JvbGxlciAtIGdhcFB4IC0gc2lkZW5vdGVXaWR0aDtcblxuXHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0YENhbGN1bGF0ZWQgc2lkZW5vdGUgd2lkdGg6ICR7c2lkZW5vdGVXaWR0aH1weCwgbGVmdCBwb3NpdGlvbjogJHtzaWRlbm90ZUxlZnR9cHhgLFxuXHRcdCk7XG5cblx0XHRsZXQgbiA9IDE7XG5cdFx0Y29uc3QgbWFyZ2luTm9kZXM6IEhUTUxFbGVtZW50W10gPSBbXTtcblxuXHRcdHRoaXMuaXNNdXRhdGluZyA9IHRydWU7XG5cdFx0dHJ5IHtcblx0XHRcdGZvciAoY29uc3QgeyBlbDogc24sIHJlY3QgfSBvZiBvcmRlcmVkKSB7XG5cdFx0XHRcdGNvbnN0IG51bSA9IFN0cmluZyhuKyspO1xuXG5cdFx0XHRcdC8vIFN1cCBtYXJrZXJcblx0XHRcdFx0Y29uc3Qgc3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN1cFwiKTtcblx0XHRcdFx0c3VwLmNsYXNzTmFtZSA9IFwic2lkZW5vdGUtcmVmXCI7XG5cdFx0XHRcdHN1cC50ZXh0Q29udGVudCA9IG51bTtcblx0XHRcdFx0c24uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgc3VwKTtcblxuXHRcdFx0XHQvLyBNYXJnaW4gbm90ZVxuXHRcdFx0XHRjb25zdCBtYXJnaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic21hbGxcIik7XG5cdFx0XHRcdG1hcmdpbi5jbGFzc05hbWUgPSBcInNpZGVub3RlLW1hcmdpblwiO1xuXHRcdFx0XHRtYXJnaW4uZGF0YXNldC5zaWRlbm90ZU51bSA9IG51bTtcblx0XHRcdFx0bWFyZ2luLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuXG5cdFx0XHRcdGNvbnN0IHkgPSByZWN0LnRvcCAtIHNjcm9sbGVyUmVjdC50b3AgKyBzY3JvbGxlci5zY3JvbGxUb3AgKyAyO1xuXG5cdFx0XHRcdG1hcmdpbi5zdHlsZS5sZWZ0ID0gYCR7c2lkZW5vdGVMZWZ0fXB4YDtcblx0XHRcdFx0bWFyZ2luLnN0eWxlLnRvcCA9IGAke3l9cHhgO1xuXHRcdFx0XHRtYXJnaW4uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHRcdG1hcmdpbi5zdHlsZS53aWR0aCA9IGAke3NpZGVub3RlV2lkdGh9cHhgO1xuXHRcdFx0XHRtYXJnaW4uc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xuXHRcdFx0XHRtYXJnaW4uc3R5bGUuekluZGV4ID0gXCIxMDAxXCI7XG5cblx0XHRcdFx0Y29uc3QgcmF3ID0gdGhpcy5ub3JtYWxpemVUZXh0KHNuLnRleHRDb250ZW50ID8/IFwiXCIpO1xuXHRcdFx0XHRtYXJnaW4uYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJNYXJrZG93bkxpbmtzVG9GcmFnbWVudChyYXcpKTtcblxuXHRcdFx0XHRvdmVybGF5LmFwcGVuZENoaWxkKG1hcmdpbik7XG5cdFx0XHRcdG1hcmdpbk5vZGVzLnB1c2gobWFyZ2luKTtcblxuXHRcdFx0XHRzbi5kYXRhc2V0LnNpZGVub3RlTnVtID0gbnVtO1xuXHRcdFx0fVxuXHRcdFx0Y29uc29sZS5sb2coYFx1MjcxMyBDcmVhdGVkICR7bWFyZ2luTm9kZXMubGVuZ3RofSBtYXJnaW4gbm90ZXNgKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5pc011dGF0aW5nID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQWN0aXZhdGUgQ1NTIGdhdGUgYW5kIGF2b2lkIGNvbGxpc2lvbnNcblx0XHR0aGlzLmFjdGl2YXRlQ3NzR2F0ZShjbVJvb3QpO1xuXHRcdHRoaXMuYXZvaWRDb2xsaXNpb25zKG1hcmdpbk5vZGVzLCA4KTtcblx0fVxuXG5cdHByaXZhdGUgcmVhZENzc1ZhclB4KFxuXHRcdGNtUm9vdDogSFRNTEVsZW1lbnQsXG5cdFx0bmFtZTogc3RyaW5nLFxuXHRcdGZhbGxiYWNrUHg6IG51bWJlcixcblx0KTogbnVtYmVyIHtcblx0XHRjb25zdCByZWFkID0gKG46IHN0cmluZyk6IHN0cmluZyA9PiB7XG5cdFx0XHRjb25zdCB2MSA9IGdldENvbXB1dGVkU3R5bGUoY21Sb290KS5nZXRQcm9wZXJ0eVZhbHVlKG4pLnRyaW0oKTtcblx0XHRcdGlmICh2MSkgcmV0dXJuIHYxO1xuXHRcdFx0cmV0dXJuIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KVxuXHRcdFx0XHQuZ2V0UHJvcGVydHlWYWx1ZShuKVxuXHRcdFx0XHQudHJpbSgpO1xuXHRcdH07XG5cblx0XHRjb25zdCB0b1B4ID0gKHJhdzogc3RyaW5nLCBmYWxsYmFjazogbnVtYmVyKTogbnVtYmVyID0+IHtcblx0XHRcdGNvbnN0IHB4ID0gL14oXFxkKyg/OlxcLlxcZCspPylweCQvLmV4ZWMocmF3KTtcblx0XHRcdGlmIChweCkgcmV0dXJuIE51bWJlcihweFsxXSk7XG5cblx0XHRcdGNvbnN0IHJlbSA9IC9eKFxcZCsoPzpcXC5cXGQrKT8pcmVtJC8uZXhlYyhyYXcpO1xuXHRcdFx0aWYgKHJlbSkge1xuXHRcdFx0XHRjb25zdCByb290Rm9udCA9XG5cdFx0XHRcdFx0cGFyc2VGbG9hdChcblx0XHRcdFx0XHRcdGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5mb250U2l6ZSxcblx0XHRcdFx0XHQpIHx8IDE2O1xuXHRcdFx0XHRyZXR1cm4gTnVtYmVyKHJlbVsxXSkgKiByb290Rm9udDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZhbGxiYWNrO1xuXHRcdH07XG5cblx0XHRjb25zdCByYXcgPSByZWFkKG5hbWUpO1xuXHRcdGlmICghcmF3KSByZXR1cm4gZmFsbGJhY2tQeDtcblx0XHRyZXR1cm4gdG9QeChyYXcsIGZhbGxiYWNrUHgpO1xuXHR9XG5cblx0cHJpdmF0ZSBub3JtYWxpemVUZXh0KHM6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIChzID8/IFwiXCIpLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTWFya2Rvd25MaW5rc1RvRnJhZ21lbnQodGV4dDogc3RyaW5nKTogRG9jdW1lbnRGcmFnbWVudCB7XG5cdFx0Y29uc3QgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0XHRjb25zdCByZSA9IC9cXFsoW15cXF1dKylcXF1cXCgoW14pXFxzXSspXFwpL2c7XG5cblx0XHRsZXQgbGFzdCA9IDA7XG5cdFx0bGV0IG06IFJlZ0V4cEV4ZWNBcnJheSB8IG51bGw7XG5cblx0XHR3aGlsZSAoKG0gPSByZS5leGVjKHRleHQpKSAhPT0gbnVsbCkge1xuXHRcdFx0Y29uc3QgW2Z1bGwsIGxhYmVsLCB1cmxSYXddID0gbTtcblx0XHRcdGNvbnN0IHN0YXJ0ID0gbS5pbmRleDtcblxuXHRcdFx0aWYgKHN0YXJ0ID4gbGFzdClcblx0XHRcdFx0ZnJhZy5hcHBlbmRDaGlsZChcblx0XHRcdFx0XHRkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0LnNsaWNlKGxhc3QsIHN0YXJ0KSksXG5cdFx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IHVybCA9IHVybFJhdy50cmltKCk7XG5cdFx0XHRjb25zdCBpc1NhZmUgPVxuXHRcdFx0XHR1cmwuc3RhcnRzV2l0aChcImh0dHA6Ly9cIikgfHxcblx0XHRcdFx0dXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKSB8fFxuXHRcdFx0XHR1cmwuc3RhcnRzV2l0aChcIm1haWx0bzpcIik7XG5cblx0XHRcdGlmIChpc1NhZmUpIHtcblx0XHRcdFx0Y29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuXHRcdFx0XHRhLnRleHRDb250ZW50ID0gbGFiZWw7XG5cdFx0XHRcdGEuaHJlZiA9IHVybDtcblx0XHRcdFx0YS5yZWwgPSBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIjtcblx0XHRcdFx0YS50YXJnZXQgPSBcIl9ibGFua1wiO1xuXHRcdFx0XHRmcmFnLmFwcGVuZENoaWxkKGEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnJhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShmdWxsKSk7XG5cdFx0XHR9XG5cblx0XHRcdGxhc3QgPSBzdGFydCArIGZ1bGwubGVuZ3RoO1xuXHRcdH1cblxuXHRcdGlmIChsYXN0IDwgdGV4dC5sZW5ndGgpXG5cdFx0XHRmcmFnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQuc2xpY2UobGFzdCkpKTtcblxuXHRcdHJldHVybiBmcmFnO1xuXHR9XG5cblx0cHJpdmF0ZSBhdm9pZENvbGxpc2lvbnMobm9kZXM6IEhUTUxFbGVtZW50W10sIHNwYWNpbmc6IG51bWJlcikge1xuXHRcdGZvciAoY29uc3Qgc24gb2Ygbm9kZXMpIHNuLnN0eWxlLnNldFByb3BlcnR5KFwiLS1zaWRlbm90ZS1zaGlmdFwiLCBcIjBweFwiKTtcblxuXHRcdGNvbnN0IG1lYXN1cmVkID0gbm9kZXNcblx0XHRcdC5tYXAoKGVsKSA9PiAoeyBlbCwgcmVjdDogZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgfSkpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gYS5yZWN0LnRvcCAtIGIucmVjdC50b3ApO1xuXG5cdFx0bGV0IGJvdHRvbSA9IC1JbmZpbml0eTtcblxuXHRcdGZvciAoY29uc3QgeyBlbCwgcmVjdCB9IG9mIG1lYXN1cmVkKSB7XG5cdFx0XHRjb25zdCBkZXNpcmVkVG9wID0gcmVjdC50b3A7XG5cdFx0XHRjb25zdCBtaW5Ub3AgPSBib3R0b20gPT09IC1JbmZpbml0eSA/IGRlc2lyZWRUb3AgOiBib3R0b20gKyBzcGFjaW5nO1xuXHRcdFx0Y29uc3QgYWN0dWFsVG9wID0gTWF0aC5tYXgoZGVzaXJlZFRvcCwgbWluVG9wKTtcblxuXHRcdFx0Y29uc3Qgc2hpZnQgPSBhY3R1YWxUb3AgLSBkZXNpcmVkVG9wO1xuXHRcdFx0aWYgKHNoaWZ0ID4gMC41KVxuXHRcdFx0XHRlbC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tc2lkZW5vdGUtc2hpZnRcIiwgYCR7c2hpZnR9cHhgKTtcblxuXHRcdFx0Ym90dG9tID0gYWN0dWFsVG9wICsgcmVjdC5oZWlnaHQ7XG5cdFx0fVxuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQTRDO0FBSTVDLElBQXFCLDJCQUFyQixjQUFzRCx1QkFBTztBQUFBLEVBQTdEO0FBQUE7QUFDQyxTQUFRLFFBQXVCO0FBQy9CLFNBQVEsV0FBd0IsQ0FBQztBQUVqQyxTQUFRLFNBQTZCO0FBQ3JDLFNBQVEsYUFBYTtBQUFBO0FBQUEsRUFFckIsTUFBTSxTQUFTO0FBQ2QsU0FBSztBQUFBLE1BQ0osS0FBSyxJQUFJLFVBQVU7QUFBQSxRQUFHO0FBQUEsUUFBc0IsTUFDM0MsS0FBSyxrQkFBa0I7QUFBQSxNQUN4QjtBQUFBLElBQ0Q7QUFDQSxTQUFLO0FBQUEsTUFDSixLQUFLLElBQUksVUFBVTtBQUFBLFFBQUc7QUFB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
