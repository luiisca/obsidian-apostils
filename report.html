<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>dependency graph</title>
    <style>
      .node:active path,
.node:hover path,
.node.current path,
.node:active polygon,
.node:hover polygon,
.node.current polygon {
	stroke: fuchsia;
	stroke-width: 2;
}

.edge:active path,
.edge:hover path,
.edge.current path,
.edge:active ellipse,
.edge:hover ellipse,
.edge.current ellipse {
	stroke: url(#edgeGradient);
	stroke-width: 3;
	stroke-opacity: 1;
}

.edge:active polygon,
.edge:hover polygon,
.edge.current polygon {
	stroke: fuchsia;
	stroke-width: 3;
	fill: fuchsia;
	stroke-opacity: 1;
	fill-opacity: 1;
}

.edge:active text,
.edge:hover text {
	fill: fuchsia;
}

.cluster path {
	stroke-width: 3;
}

.cluster:active path,
.cluster:hover path {
	fill: #ffff0011;
}

div.hint {
	background-color: #000000aa;
	color: white;
	font-family: Arial, Helvetica, sans-serif;
	border-radius: 1rem;
	position: fixed;
	top: calc(50% - 4em);
	right: calc(50% - 10em);
	border: none;
	padding: 1em 3em 1em 1em;
}

.hint button {
	position: absolute;
	font-weight: bolder;
	right: 0.6em;
	top: 0.6em;
	color: inherit;
	background-color: inherit;
	border: 1px solid currentColor;
	border-radius: 1em;
	margin-left: 0.6em;
}

.hint a {
	color: inherit;
}

#button_help {
	color: white;
	background-color: #00000011;
	border-radius: 1em;
	position: fixed;
	top: 1em;
	right: 1em;
	font-size: 24pt;
	font-weight: bolder;
	width: 2em;
	height: 2em;
	border: none;
}

#button_help:hover {
	cursor: pointer;
	background-color: #00000077;
}

@media print {
	#button_help {
		display: none;
	}

	div.hint {
		display: none;
	}
}

    </style>
  </head>
  <body>
    <button id="button_help">?</button>
    <div id="hints" class="hint" style="display: none">
      <button id="close-hints">x</button>
      <span id="hint-text"></span>
      <ul>
        <li><b>Hover</b> - highlight</li>
        <li><b>Right-click</b> - pin highlight</li>
        <li><b>ESC</b> - clear</li>
      </ul>
    </div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.1.1 (0)
 -->
<!-- Title: dependency&#45;cruiser output Pages: 1 -->
<svg width="317pt" height="183pt"
 viewBox="0.00 0.00 317.00 183.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 179)">
<title>dependency&#45;cruiser output</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-179 312.5,-179 312.5,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_src</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M20,-8C20,-8 288.5,-8 288.5,-8 294.5,-8 300.5,-14 300.5,-20 300.5,-20 300.5,-155 300.5,-155 300.5,-161 294.5,-167 288.5,-167 288.5,-167 20,-167 20,-167 14,-167 8,-161 8,-155 8,-155 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text xml:space="preserve" text-anchor="middle" x="154.25" y="-154.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">src</text>
</g>
<!-- src/highlighter.ts -->
<g id="node1" class="node">
<title>src/highlighter.ts</title>
<g id="a_node1"><a xlink:href="src/highlighter.ts" xlink:title="highlighter.ts">
<path fill="#ddfeff" stroke="black" d="M78.33,-93.25C78.33,-93.25 22.17,-93.25 22.17,-93.25 19.08,-93.25 16,-90.17 16,-87.08 16,-87.08 16,-80.92 16,-80.92 16,-77.83 19.08,-74.75 22.17,-74.75 22.17,-74.75 78.33,-74.75 78.33,-74.75 81.42,-74.75 84.5,-77.83 84.5,-80.92 84.5,-80.92 84.5,-87.08 84.5,-87.08 84.5,-90.17 81.42,-93.25 78.33,-93.25"/>
<text xml:space="preserve" text-anchor="start" x="24" y="-80.7" font-family="Helvetica,sans-Serif" font-size="9.00">highlighter.ts</text>
</a>
</g>
</g>
<!-- src/inline&#45;footnote&#45;manager.ts -->
<g id="node2" class="node">
<title>src/inline&#45;footnote&#45;manager.ts</title>
<g id="a_node2"><a xlink:href="src/inline-footnote-manager.ts" xlink:title="inline&#45;footnote&#45;manager.ts">
<path fill="#ddfeff" stroke="black" d="M214.58,-34.25C214.58,-34.25 103.67,-34.25 103.67,-34.25 100.58,-34.25 97.5,-31.17 97.5,-28.08 97.5,-28.08 97.5,-21.92 97.5,-21.92 97.5,-18.83 100.58,-15.75 103.67,-15.75 103.67,-15.75 214.58,-15.75 214.58,-15.75 217.67,-15.75 220.75,-18.83 220.75,-21.92 220.75,-21.92 220.75,-28.08 220.75,-28.08 220.75,-31.17 217.67,-34.25 214.58,-34.25"/>
<text xml:space="preserve" text-anchor="start" x="105.5" y="-21.7" font-family="Helvetica,sans-Serif" font-size="9.00">inline&#45;footnote&#45;manager.ts</text>
</a>
</g>
</g>
<!-- src/highlighter.ts&#45;&gt;src/inline&#45;footnote&#45;manager.ts -->
<g id="edge1" class="edge">
<title>src/highlighter.ts&#45;&gt;src/inline&#45;footnote&#45;manager.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M59.55,-74.54C68.18,-65.27 82.49,-51.34 97.5,-43 100.94,-41.09 104.61,-39.36 108.37,-37.8"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="109,-39.81 113.87,-35.72 107.51,-35.88 109,-39.81"/>
</g>
<!-- src/main.ts -->
<g id="node3" class="node">
<title>src/main.ts</title>
<g id="a_node3"><a xlink:href="src/main.ts" xlink:title="main.ts">
<path fill="#ddfeff" stroke="black" d="M179.96,-109.25C179.96,-109.25 138.29,-109.25 138.29,-109.25 135.21,-109.25 132.12,-106.17 132.12,-103.08 132.12,-103.08 132.12,-96.92 132.12,-96.92 132.12,-93.83 135.21,-90.75 138.29,-90.75 138.29,-90.75 179.96,-90.75 179.96,-90.75 183.04,-90.75 186.12,-93.83 186.12,-96.92 186.12,-96.92 186.12,-103.08 186.12,-103.08 186.12,-106.17 183.04,-109.25 179.96,-109.25"/>
<text xml:space="preserve" text-anchor="start" x="144.5" y="-96.7" font-family="Helvetica,sans-Serif" font-size="9.00">main.ts</text>
</a>
</g>
</g>
<!-- src/highlighter.ts&#45;&gt;src/main.ts -->
<g id="edge2" class="edge">
<title>src/highlighter.ts&#45;&gt;src/main.ts</title>
<g id="a_edge2"><a xlink:title="no&#45;circular">
<path fill="none" stroke="orange" d="M84.77,-84.81C94.62,-85.98 105.51,-87.55 115.83,-89.26"/>
<polygon fill="orange" stroke="orange" points="124.07,-92.87 130.35,-91.86 124.81,-88.73 124.07,-92.87"/>
<polyline fill="none" stroke="orange" points="123.95,-90.71 121,-90.18"/>
<ellipse fill="none" stroke="orange" cx="118.14" cy="-89.67" rx="2.4" ry="2.4"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="130.25" y="-79.53" font-family="Helvetica,sans-Serif" font-size="9.00" fill="orange">no&#45;circular</text>
</g>
<!-- src/regex&#45;patterns.ts -->
<g id="node4" class="node">
<title>src/regex&#45;patterns.ts</title>
<g id="a_node4"><a xlink:href="src/regex-patterns.ts" xlink:title="regex&#45;patterns.ts">
<path fill="#ddfeff" stroke="black" d="M195.08,-78.25C195.08,-78.25 123.17,-78.25 123.17,-78.25 120.08,-78.25 117,-75.17 117,-72.08 117,-72.08 117,-65.92 117,-65.92 117,-62.83 120.08,-59.75 123.17,-59.75 123.17,-59.75 195.08,-59.75 195.08,-59.75 198.17,-59.75 201.25,-62.83 201.25,-65.92 201.25,-65.92 201.25,-72.08 201.25,-72.08 201.25,-75.17 198.17,-78.25 195.08,-78.25"/>
<text xml:space="preserve" text-anchor="start" x="125" y="-65.7" font-family="Helvetica,sans-Serif" font-size="9.00">regex&#45;patterns.ts</text>
</a>
</g>
</g>
<!-- src/highlighter.ts&#45;&gt;src/regex&#45;patterns.ts -->
<g id="edge3" class="edge">
<title>src/highlighter.ts&#45;&gt;src/regex&#45;patterns.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M84.77,-79.3C92.16,-78.26 100.13,-77.14 108.01,-76.03"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="108.18,-78.13 113.83,-75.22 107.6,-73.97 108.18,-78.13"/>
</g>
<!-- src/types.ts -->
<g id="node5" class="node">
<title>src/types.ts</title>
<g id="a_node5"><a xlink:href="src/types.ts" xlink:title="types.ts">
<path fill="#ddfeff" stroke="black" d="M283.96,-56.25C283.96,-56.25 242.29,-56.25 242.29,-56.25 239.21,-56.25 236.12,-53.17 236.12,-50.08 236.12,-50.08 236.12,-43.92 236.12,-43.92 236.12,-40.83 239.21,-37.75 242.29,-37.75 242.29,-37.75 283.96,-37.75 283.96,-37.75 287.04,-37.75 290.12,-40.83 290.12,-43.92 290.12,-43.92 290.12,-50.08 290.12,-50.08 290.12,-53.17 287.04,-56.25 283.96,-56.25"/>
<text xml:space="preserve" text-anchor="start" x="247.75" y="-43.7" font-family="Helvetica,sans-Serif" font-size="9.00">types.ts</text>
</a>
</g>
</g>
<!-- src/highlighter.ts&#45;&gt;src/types.ts -->
<g id="edge4" class="edge">
<title>src/highlighter.ts&#45;&gt;src/types.ts</title>
<path fill="none" stroke="#000000" stroke-opacity="0.200000" d="M62.16,-74.5C71.02,-67.41 84.19,-58.25 97.5,-54 141.08,-40.09 194.45,-40.83 228.37,-43.34"/>
<polygon fill="none" stroke="#000000" stroke-opacity="0.200000" points="228.06,-45.42 234.21,-43.81 228.4,-41.23 228.06,-45.42"/>
</g>
<!-- src/utils.ts -->
<g id="node6" class="node">
<title>src/utils.ts</title>
<g id="a_node6"><a xlink:href="src/utils.ts" xlink:title="utils.ts">
<path fill="#ddfeff" stroke="black" d="M179.96,-140.25C179.96,-140.25 138.29,-140.25 138.29,-140.25 135.21,-140.25 132.12,-137.17 132.12,-134.08 132.12,-134.08 132.12,-127.92 132.12,-127.92 132.12,-124.83 135.21,-121.75 138.29,-121.75 138.29,-121.75 179.96,-121.75 179.96,-121.75 183.04,-121.75 186.12,-124.83 186.12,-127.92 186.12,-127.92 186.12,-134.08 186.12,-134.08 186.12,-137.17 183.04,-140.25 179.96,-140.25"/>
<text xml:space="preserve" text-anchor="start" x="146.38" y="-127.7" font-family="Helvetica,sans-Serif" font-size="9.00">utils.ts</text>
</a>
</g>
</g>
<!-- src/highlighter.ts&#45;&gt;src/utils.ts -->
<g id="edge5" class="edge">
<title>src/highlighter.ts&#45;&gt;src/utils.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M63.15,-93.61C72.13,-100.43 84.99,-109.35 97.5,-115 105.53,-118.63 114.53,-121.56 123.1,-123.87"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="122.54,-125.9 128.87,-125.32 123.57,-121.82 122.54,-125.9"/>
</g>
<!-- src/inline&#45;footnote&#45;manager.ts&#45;&gt;src/types.ts -->
<g id="edge6" class="edge">
<title>src/inline&#45;footnote&#45;manager.ts&#45;&gt;src/types.ts</title>
<path fill="none" stroke="#000000" stroke-opacity="0.200000" d="M205.16,-34.71C213.01,-36.41 221.04,-38.14 228.51,-39.75"/>
<polygon fill="none" stroke="#000000" stroke-opacity="0.200000" points="227.98,-41.78 234.29,-41 228.86,-37.68 227.98,-41.78"/>
</g>
<!-- src/main.ts&#45;&gt;src/highlighter.ts -->
<g id="edge7" class="edge">
<title>src/main.ts&#45;&gt;src/highlighter.ts</title>
<g id="a_edge7"><a xlink:title="no&#45;circular">
<path fill="none" stroke="orange" stroke-width="2" d="M131.84,-100C123.07,-99.09 112.98,-97.76 102.97,-96.24"/>
<polygon fill="orange" stroke="orange" stroke-width="2" points="94.02,-92.63 87.76,-93.72 93.34,-96.77 94.02,-92.63"/>
<polyline fill="none" stroke="orange" stroke-width="2" points="94.67,-94.87 97.62,-95.36"/>
<ellipse fill="none" stroke="orange" stroke-width="2" cx="100.98" cy="-95.91" rx="2.4" ry="2.4"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="86.38" y="-98.96" font-family="Helvetica,sans-Serif" font-size="9.00" fill="orange">no&#45;circular</text>
</g>
<!-- src/main.ts&#45;&gt;src/types.ts -->
<g id="edge9" class="edge">
<title>src/main.ts&#45;&gt;src/types.ts</title>
<path fill="none" stroke="#000000" stroke-opacity="0.200000" d="M186.5,-95.86C197.53,-93.43 210.21,-89.68 220.75,-84 231.37,-78.28 241.49,-69.32 249.07,-61.64"/>
<polygon fill="none" stroke="#000000" stroke-opacity="0.200000" points="250.22,-63.48 252.83,-57.69 247.17,-60.58 250.22,-63.48"/>
</g>
<!-- src/setttings.ts -->
<g id="node7" class="node">
<title>src/setttings.ts</title>
<g id="a_node7"><a xlink:href="src/setttings.ts" xlink:title="setttings.ts">
<path fill="#ddfeff" stroke="black" d="M286.33,-109.25C286.33,-109.25 239.92,-109.25 239.92,-109.25 236.83,-109.25 233.75,-106.17 233.75,-103.08 233.75,-103.08 233.75,-96.92 233.75,-96.92 233.75,-93.83 236.83,-90.75 239.92,-90.75 239.92,-90.75 286.33,-90.75 286.33,-90.75 289.42,-90.75 292.5,-93.83 292.5,-96.92 292.5,-96.92 292.5,-103.08 292.5,-103.08 292.5,-106.17 289.42,-109.25 286.33,-109.25"/>
<text xml:space="preserve" text-anchor="start" x="241.75" y="-96.7" font-family="Helvetica,sans-Serif" font-size="9.00">setttings.ts</text>
</a>
</g>
</g>
<!-- src/main.ts&#45;&gt;src/setttings.ts -->
<g id="edge8" class="edge">
<title>src/main.ts&#45;&gt;src/setttings.ts</title>
<g id="a_edge8"><a xlink:title="no&#45;circular">
<path fill="none" stroke="orange" stroke-width="2" d="M186.39,-96.01C195.06,-95.62 204.98,-95.46 214.72,-95.51"/>
<polygon fill="orange" stroke="orange" stroke-width="2" points="224.37,-97.81 230.41,-95.84 224.46,-93.62 224.37,-97.81"/>
<polyline fill="none" stroke="orange" stroke-width="2" points="223.41,-95.69 220.41,-95.63"/>
<ellipse fill="none" stroke="orange" stroke-width="2" cx="217.01" cy="-95.56" rx="2.4" ry="2.4"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="188.4" y="-86.95" font-family="Helvetica,sans-Serif" font-size="9.00" fill="orange">no&#45;circular</text>
</g>
<!-- src/setttings.ts&#45;&gt;src/main.ts -->
<g id="edge10" class="edge">
<title>src/setttings.ts&#45;&gt;src/main.ts</title>
<g id="a_edge10"><a xlink:title="no&#45;circular">
<path fill="none" stroke="orange" d="M233.44,-104.09C223.86,-104.47 212.98,-104.58 202.58,-104.44"/>
<polygon fill="orange" stroke="orange" points="193.96,-102.1 187.91,-104.03 193.84,-106.3 193.96,-102.1"/>
<polyline fill="none" stroke="orange" points="194.4,-104.22 197.4,-104.3"/>
<ellipse fill="none" stroke="orange" cx="200.3" cy="-104.38" rx="2.4" ry="2.4"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="188.2" y="-106.45" font-family="Helvetica,sans-Serif" font-size="9.00" fill="orange">no&#45;circular</text>
</g>
</g>
</svg>
    <script>
      var gMode = new Mode();

var title2ElementMap = (function makeElementMap() {
	/** @type {NodeListOf<SVGGElement>} */
	var nodes = document.querySelectorAll(".node");
	/** @type {NodeListOf<SVGGElement>} */
	var edges = document.querySelectorAll(".edge");
	return new Title2ElementMap(edges, nodes);
})();

function getHoverHandler(pTitle2ElementMap) {
	/** @type {string} */
	var currentHighlightedTitle = "";

	/** @param {MouseEvent} pMouseEvent */
	return function hoverHighlightHandler(pMouseEvent) {
		var closestNodeOrEdge = pMouseEvent.target.closest(".edge, .node");
		var closestTitleText = getTitleText(closestNodeOrEdge);

		if (
			currentHighlightedTitle !== closestTitleText &&
			gMode.get() === gMode.HOVER
		) {
			resetNodesAndEdges();
			addHighlight(closestNodeOrEdge);
			pTitle2ElementMap.get(closestTitleText).forEach(addHighlight);
			currentHighlightedTitle = closestTitleText;
		}
	};
}

function getSelectHandler(pTitle2ElementMap) {
	/** @type {string} */
	var currentHighlightedTitle = "";

	/** @param {MouseEvent} pMouseEvent */
	return function selectHighlightHandler(pMouseEvent) {
		pMouseEvent.preventDefault();

		var closestNodeOrEdge = pMouseEvent.target.closest(".edge, .node");
		var closestTitleText = getTitleText(closestNodeOrEdge);

		if (closestNodeOrEdge) {
			gMode.setToSelect();
		} else {
			gMode.setToHover();
		}
		if (currentHighlightedTitle !== closestTitleText) {
			resetNodesAndEdges();
			addHighlight(closestNodeOrEdge);
			pTitle2ElementMap.get(closestTitleText).forEach(addHighlight);
			currentHighlightedTitle = closestTitleText;
		}
	};
}
function Mode() {
	var HOVER = 1;
	var SELECT = 2;

	function setToHover() {
		this._mode = HOVER;
	}
	function setToSelect() {
		this._mode = SELECT;
	}

	/**
	 * @returns {number}
	 */
	function get() {
		return this._mode || HOVER;
	}

	return {
		HOVER: HOVER,
		SELECT: SELECT,
		setToHover: setToHover,
		setToSelect: setToSelect,
		get: get,
	};
}

/**
 *
 * @param {SVGGelement[]} pEdges
 * @param {SVGGElement[]} pNodes
 * @return {{get: (pTitleText:string) => SVGGElement[]}}
 */
function Title2ElementMap(pEdges, pNodes) {
	/* {{[key: string]: SVGGElement[]}} */
	var elementMap = buildMap(pEdges, pNodes);

	/**
	 * @param {NodeListOf<SVGGElement>} pEdges
	 * @param {NodeListOf<SVGGElement>} pNodes
	 * @return {{[key: string]: SVGGElement[]}}
	 */
	function buildMap(pEdges, pNodes) {
		var title2NodeMap = buildTitle2NodeMap(pNodes);

		return nodeListToArray(pEdges).reduce(addEdgeToMap(title2NodeMap), {});
	}
	/**
	 * @param {NodeListOf<SVGGElement>} pNodes
	 * @return {{[key: string]: SVGGElement}}
	 */
	function buildTitle2NodeMap(pNodes) {
		return nodeListToArray(pNodes).reduce(addNodeToMap, {});
	}

	function addNodeToMap(pMap, pNode) {
		var titleText = getTitleText(pNode);

		if (titleText) {
			pMap[titleText] = pNode;
		}
		return pMap;
	}

	function addEdgeToMap(pNodeMap) {
		return function (pEdgeMap, pEdge) {
			/** @type {string} */
			var titleText = getTitleText(pEdge);

			if (titleText) {
				var edge = pryEdgeFromTitle(titleText);

				pEdgeMap[titleText] = [pNodeMap[edge.from], pNodeMap[edge.to]];
				(pEdgeMap[edge.from] || (pEdgeMap[edge.from] = [])).push(pEdge);
				(pEdgeMap[edge.to] || (pEdgeMap[edge.to] = [])).push(pEdge);
			}
			return pEdgeMap;
		};
	}

	/**
	 *
	 * @param {string} pString
	 * @return {{from?: string; to?:string;}}
	 */
	function pryEdgeFromTitle(pString) {
		var nodeNames = pString.split(/\s*->\s*/);

		return {
			from: nodeNames.shift(),
			to: nodeNames.shift(),
		};
	}
	/**
	 *
	 * @param {string} pTitleText
	 * @return {SVGGElement[]}
	 */
	function get(pTitleText) {
		return (pTitleText && elementMap[pTitleText]) || [];
	}
	return {
		get: get,
	};
}

/**
 * @param {SVGGElement} pGElement
 * @return {string?}
 */
function getTitleText(pGElement) {
	/** @type {SVGTitleElement} */
	var title = pGElement && pGElement.querySelector("title");
	/** @type {string} */
	var titleText = title && title.textContent;

	if (titleText) {
		titleText = titleText.trim();
	}
	return titleText;
}

/**
 * @param {NodeListOf<Element>} pNodeList
 * @return {Element[]}
 */
function nodeListToArray(pNodeList) {
	var lReturnValue = [];

	pNodeList.forEach(function (pElement) {
		lReturnValue.push(pElement);
	});

	return lReturnValue;
}

function resetNodesAndEdges() {
	nodeListToArray(document.querySelectorAll(".current")).forEach(
		removeHighlight,
	);
}

/**
 * @param {SVGGElement} pGElement
 */
function removeHighlight(pGElement) {
	if (pGElement && pGElement.classList) {
		pGElement.classList.remove("current");
	}
}

/**
 * @param {SVGGElement} pGroup
 */
function addHighlight(pGroup) {
	if (pGroup && pGroup.classList) {
		pGroup.classList.add("current");
	}
}

var gHints = {
	HIDDEN: 1,
	SHOWN: 2,
	state: 1, // === HIDDEN
	show: function () {
		document.getElementById("hints").removeAttribute("style");
		gHints.state = gHints.SHOWN;
	},
	hide: function () {
		document.getElementById("hints").style = "display:none";
		gHints.state = gHints.HIDDEN;
	},
	toggle: function () {
		if ((gHints.state || gHints.HIDDEN) === gHints.HIDDEN) {
			gHints.show();
		} else {
			gHints.hide();
		}
	},
};

/** @param {KeyboardEvent} pKeyboardEvent */
function keyboardEventHandler(pKeyboardEvent) {
	if (pKeyboardEvent.key === "Escape") {
		resetNodesAndEdges();
		gMode.setToHover();
		gHints.hide();
	}
	if (pKeyboardEvent.key === "F1") {
		pKeyboardEvent.preventDefault();
		gHints.toggle();
	}
}

document.addEventListener("contextmenu", getSelectHandler(title2ElementMap));
document.addEventListener("mouseover", getHoverHandler(title2ElementMap));
document.addEventListener("keydown", keyboardEventHandler);
document.getElementById("close-hints").addEventListener("click", gHints.hide);
document.getElementById("button_help").addEventListener("click", gHints.toggle);
document.querySelector("svg").insertAdjacentHTML(
	"afterbegin",
	`<linearGradient id="edgeGradient">
      <stop offset="0%" stop-color="fuchsia"/>
      <stop offset="100%" stop-color="purple"/>
   </linearGradient>
  `,
);

// Slightly nudge the last numeric path value (+0.001) so SVG stroke
// gradients render correctly on horizontal paths. Without them,
// they don't render at all (firefox, chrome).
function skewLineABit(lDrawingInstructions) {
	var lLastValue = lDrawingInstructions.match(/(\d+\.?\d*)$/)[0];
	// Smaller values than .001 _should_ work, but don't always.
	// Even this value is so small that it is not visible to the
	// human eye (tested with the two I have at my disposal).
	var lIncrement = 0.001;
	var lNewLastValue = Number.parseFloat(lLastValue) + lIncrement;

	return lDrawingInstructions.replace(lLastValue, lNewLastValue);
}

nodeListToArray(document.querySelectorAll("path"))
	.filter(function (pElement) {
		return pElement.parentElement.classList.contains("edge");
	})
	.forEach(function (pElement) {
		pElement.attributes.d.value = skewLineABit(pElement.attributes.d.value);
	});

    </script>
  </body>
</html>
